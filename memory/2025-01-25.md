# 2025-01-25 Session Notes

## YouTube Manager App (`/root/clawd/youtube-manager`)

**GitHub:** https://github.com/CubanHackerAI/youtube_channels_clawd

### Current State
- App runs on port 3001: `npm run dev -- -p 3001`
- Data stored in `data/videos.json` and `data/channels.json`
- Frontend polls `/api/videos?channelId=cubanhacker`

### TipTap AI Editor (NEW!)
Added rich text editor for transcript/seed material field:
- **Component:** `src/components/TranscriptEditor.tsx`
- **Features:**
  - Rich text toolbar: Bold, Italic, Strikethrough, Highlight, H1-H3, Lists, Blockquotes
  - **‚ú® AI Actions dropdown** with 7 transforms:
    - üìù Format & Structure - add headings/sections
    - üìã Summarize - create concise summary
    - ‚ú® Expand - add more detail
    - üîß Improve Writing - fix grammar, improve clarity
    - ‚Ä¢ Key Points - extract as bullet list
    - ‚è±Ô∏è Add Timestamps - organize by topic
    - üí¨ Extract Quotes - pull notable quotes
  - Auto-converts plain text to HTML paragraphs
  - Auto-save every 30 seconds
  - Selection-aware AI actions
- **API:** `POST /api/ai/transform` - AI text transformations
- **Requires:** `ANTHROPIC_API_KEY` in `.env.local` for full AI features

### Transcript Fetching
- **Apify integration working** - using `karamelo~youtube-transcripts` actor
- Apify token stored in `.env.local` as `APIFY_TOKEN`
- **Disabled ytdl-core fallback** - was causing server crashes

### API Endpoints
- `POST /api/videos/[id]/transcript` - fetch transcript via Apify
- `GET /api/videos/[id]/transcript` - check if transcript exists
- `POST /api/ai/transform` - AI text transformations
- `GET /api/videos` - list videos
- `PATCH /api/videos/[id]` - update video

### TipTap Packages Installed
```json
"@tiptap/react": "^3.17.1",
"@tiptap/starter-kit": "...",
"@tiptap/extension-placeholder": "...",
"@tiptap/extension-highlight": "...",
"@tiptap/extension-typography": "...",
"@tiptap/pm": "..."
```

### Key Files Created/Modified
- `src/components/TranscriptEditor.tsx` - TipTap editor component
- `src/app/api/ai/transform/route.ts` - AI transform API
- `src/app/api/videos/[id]/transcript/route.ts` - transcript fetch API
- `src/lib/transcript.ts` - Apify transcript fetching
- `src/app/globals.css` - TipTap styling
- `formatted-transcript-matthew-berman.md` - example formatted transcript

### Server Management
- Server runs in background via exec sessions
- If port 3001 blocked: `fuser -k 3001/tcp` then restart
- Check status: `curl http://localhost:3001/api/videos`

### Git Pushed
- Commit: `7c382f6` - "feat: TipTap AI editor for transcripts + Apify integration"
